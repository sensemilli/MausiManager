<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="WiCAM.Pn4000.Gmpool.MaterialSelectControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008">
  <FocusManager.FocusedElement>
      
    <x:Reference>TextBox</x:Reference>
  </FocusManager.FocusedElement>
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MausiManager;component/Resources/StylesDictionary.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>
  <UserControl.InputBindings>
    <KeyBinding Key="End" Command="{Binding CancelCommand}" />
    <MouseBinding Gesture="RightClick" Command="{Binding OkCommand}" />
  </UserControl.InputBindings>
  <Border Margin="3" Background="{StaticResource brushBackground}">
    <Grid Margin="3">
      <Grid.RowDefinitions>
        <RowDefinition Height="100" />
        <RowDefinition />
        <RowDefinition Height="100" />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100" />
        <ColumnDefinition />
        <ColumnDefinition Width="100" />
      </Grid.ColumnDefinitions>
      <Border Grid.Row="1" Grid.Column="1" BorderBrush="#FF696969" BorderThickness="1" Background="#FFF5F5F5" Padding="5">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition />
            <RowDefinition Height="28" />
          </Grid.RowDefinitions>
          <StackPanel Grid.Row="0" Margin="3" Orientation="Horizontal">
            <TextBlock Text="{DynamicResource Search}" />
            <TextBox xmlns:ConnectionId="1" Name="TextBox" MinWidth="100" Margin="10,0,0,0" Text="{Binding SearchString, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}" />
          </StackPanel>
          <DataGrid xmlns:ConnectionId="2" Name="gridData" Grid.Row="1" IsSynchronizedWithCurrentItem="True" SelectionMode="Single" CanUserResizeRows="False" Margin="3,0,3,3" MinRowHeight="19" CanUserDeleteRows="False" IsReadOnly="True" ClipboardCopyMode="IncludeHeader" Background="#FFF0F0F0" RowDetailsVisibilityMode="Collapsed" ItemsSource="{Binding MaterialArts}" SelectedItem="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <DataGrid.RowStyle>
              <Style TargetType="{x:Type DataGridRow}">
                <Style.Triggers>
                  <DataTrigger Binding="{Binding IsSelected}" Value="True">
                    <Setter Property="Control.Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                  </DataTrigger>
                  <DataTrigger Binding="{Binding IsSelected}" Value="False">
                    <Setter Property="Control.Background" Value="#FFFFFFFF" />
                  </DataTrigger>
                </Style.Triggers>
              </Style>
            </DataGrid.RowStyle>
          </DataGrid>
          <StackPanel Orientation="Horizontal" Grid.Row="2" HorizontalAlignment="Right" Margin="0,3,0,0">
            <Button Content="{DynamicResource ButtonCancel}" Command="{Binding CancelCommand}" />
            <Button Content="{DynamicResource ButtonOK}" IsDefault="True" Command="{Binding OkCommand}" />
          </StackPanel>
        </Grid>
      </Border>
    </Grid>
  </Border>
</UserControl>