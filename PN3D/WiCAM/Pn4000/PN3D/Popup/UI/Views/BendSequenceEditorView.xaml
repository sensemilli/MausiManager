<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="WiCAM.Pn4000.PN3D.Popup.UI.Views.BendSequenceEditorView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:viewModels="clr-namespace:WiCAM.Pn4000.PN3D.Popup.UI.ViewModels" xmlns:popup="clr-namespace:WiCAM.Pn4000.Popup;assembly=WiCAM.Pn4000.Popup" xmlns:ui="clr-namespace:WiCAM.Pn4000.PN3D.BendSimulation.Configuration.UI" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" x:Name="This" Background="#00FFFFFF" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" xmlns:views="clr-namespace:WiCAM.Pn4000.PN3D.Popup.UI.Views" IsVisibleChanged="UserControl_IsVisibleChanged">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <Style x:Key="DraggableListBoxItem" TargetType="{x:Type telerik:RadListBoxItem}">
        <Setter Property="telerik:DragDropManager.AllowCapturedDrag" Value="True" />
      </Style>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Border BorderBrush="#FFA9A9A9" BorderThickness="1" CornerRadius="7.5">
    <Border.Background>
      <SolidColorBrush Color="WhiteSmoke" Opacity="0.8" />
    </Border.Background>
    <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="2" />
        <RowDefinition Height="1*" />
      </Grid.RowDefinitions>
      <Grid Row="0">
        <WrapPanel Grid.Row="0" Grid.Column="0">
          <TextBlock VerticalAlignment="Center" Text="{DynamicResource BendView.BendSequenceView.TitleCalculation}" ToolTip="{DynamicResource BendView.BendSequenceView.TitleCalculationTt}" Margin="5,0" FontWeight="Bold" />
          <CheckBox IsThreeState="True" Content="{DynamicResource BendView.BendSequenceView.BndAutoCalcBendOrder}" ToolTip="{DynamicResource BendView.BendSequenceView.BndAutoCalcBendOrderTt}" Margin="10,0" IsChecked="{Binding BndAutoUseCalcBendOrder}" />
          <TextBlock VerticalAlignment="Center" Text="{DynamicResource BendView.BendSequenceView.AmountCalculations}" ToolTip="{DynamicResource BendView.BendSequenceView.AmountCalculationsTt}" Margin="10,0,0,0" />
          <TextBox ToolTip="{DynamicResource BendView.BendSequenceView.AmountCalculationsTt}" MinWidth="50" Text="{Binding OrderOptionAmountCalculations}" />
          <TextBlock VerticalAlignment="Center" Text="{DynamicResource BendView.BendSequenceView.SubSimSteps}" ToolTip="{DynamicResource BendView.BendSequenceView.SubSimStepsTt}" Margin="10,0,0,0" />
          <TextBox ToolTip="{DynamicResource BendView.BendSequenceView.SubSimStepsTt}" MinWidth="50" Text="{Binding OrderOptionSubSimStepMaxAngleDeg}" />
        </WrapPanel>
      </Grid>
      <TextBlock Grid.Row="1" Background="#FF696969" />
      <Grid Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="1*" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*" />
          <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <DockPanel Grid.Row="0" Grid.Column="0">
          <TextBlock VerticalAlignment="Center" Text="{DynamicResource BendView.BendSequenceView.TitleSorting}" ToolTip="{DynamicResource BendView.BendSequenceView.TitleSortingTt}" Margin="5,0" FontWeight="Bold" />
          <Button Margin="5,0" Content="{DynamicResource BendView.BendSequenceView.NewStrategy}" Command="{Binding CmdNewStrategy}" />
        </DockPanel>
        <telerik:RadComboBox Grid.Row="0" Grid.Column="1" EmptyText="{DynamicResource l_enum.BendSequence.SelectNewElement}" DisplayMemberPath="Desc" ItemsSource="{Binding SequenceItems}" SelectedItem="{Binding SelectedNewItem}" />
        <CheckBox Grid.Row="2" Grid.Column="1" Content="{DynamicResource BendView.BendSequenceView.UseGroupParallels}" IsChecked="{Binding SelectedStrategy.GroupParallels}" />
        <telerik:RadComboBox Grid.Row="3" Grid.Column="1" EmptyText="{DynamicResource l_enum.BendSequence.SelectNewElement}" DisplayMemberPath="Desc" ItemsSource="{Binding SequenceItems}" SelectedItem="{Binding SelectedNewGroupItem}" Visibility="{Binding SelectedStrategy.VisibilityGroupParallel}" />
        <telerik:RadListBox Grid.Row="1" Grid.Column="0" Grid.RowSpan="4" SelectionMode="Single" ItemContainerStyle="{StaticResource DraggableListBoxItem}" ItemsSource="{Binding AllStrategies}" SelectedItem="{Binding SelectedStrategy, Mode=TwoWay}">
          <telerik:RadListBox.DragDropBehavior>
            <telerik:ListBoxDragDropBehavior AllowReorder="True" />
          </telerik:RadListBox.DragDropBehavior>
          <telerik:RadListBox.DragVisualProvider>
            <telerik:ListBoxDragVisualProvider />
          </telerik:RadListBox.DragVisualProvider>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="Auto" />
                  <ColumnDefinition Width="1*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <CheckBox Grid.Column="0" ToolTip="{DynamicResource BendView.BendSequenceView.UseInBndAuto}" IsChecked="{Binding Enabled}" />
                <TextBox Grid.Column="1" MinWidth="50" Text="{Binding Description}" />
                <TextBlock Grid.Column="2" />
                <Button Grid.Column="3" Command="{Binding CmdDelete}">
                  <telerik:RadGlyph Glyph="" Foreground="#FFFF0000" FontSize="16" />
                </Button>
              </Grid>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </telerik:RadListBox>
        <telerik:RadListBox Grid.Row="1" Grid.Column="1" SelectionMode="Extended" ItemContainerStyle="{StaticResource DraggableListBoxItem}" ItemsSource="{Binding SelectedStrategy.Items}">
          <telerik:RadListBox.DragDropBehavior>
            <telerik:ListBoxDragDropBehavior AllowReorder="True" />
          </telerik:RadListBox.DragDropBehavior>
          <telerik:RadListBox.DragVisualProvider>
            <telerik:ListBoxDragVisualProvider />
          </telerik:RadListBox.DragVisualProvider>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="1*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" MinWidth="100" Text="{Binding Description}" />
                <Button Grid.Column="1" CommandParameter="{Binding}" Command="{Binding ElementName=This, Path=DataContext.SelectedStrategy.CmdDeleteItem}">
                  <telerik:RadGlyph Glyph="" Foreground="#FFFF0000" FontSize="16" />
                </Button>
              </Grid>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </telerik:RadListBox>
        <telerik:RadListBox Grid.Row="4" Grid.Column="1" SelectionMode="Extended" ItemContainerStyle="{StaticResource DraggableListBoxItem}" ItemsSource="{Binding SelectedStrategy.GroupItems}" Visibility="{Binding SelectedStrategy.VisibilityGroupParallel}">
          <telerik:RadListBox.DragDropBehavior>
            <telerik:ListBoxDragDropBehavior AllowReorder="True" />
          </telerik:RadListBox.DragDropBehavior>
          <telerik:RadListBox.DragVisualProvider>
            <telerik:ListBoxDragVisualProvider />
          </telerik:RadListBox.DragVisualProvider>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="1*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" MinWidth="100" Text="{Binding Description}" />
                <Button Grid.Column="1" CommandParameter="{Binding}" Command="{Binding ElementName=This, Path=DataContext.SelectedStrategy.CmdDeleteGroupItem}">
                  <telerik:RadGlyph Glyph="" Foreground="#FFFF0000" FontSize="16" />
                </Button>
              </Grid>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </telerik:RadListBox>
      </Grid>
    </Grid>
  </Border>
</UserControl>