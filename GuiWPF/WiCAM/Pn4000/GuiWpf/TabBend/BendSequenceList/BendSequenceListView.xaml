<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="WiCAM.Pn4000.GuiWpf.TabBend.BendSequenceList.BendSequenceListView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:WiCAM.Pn4000.GuiWpf.TabBend.BendSequenceList" xmlns:editTools="clr-namespace:WiCAM.Pn4000.ToolCalculationGuiWpf.EditTools;assembly=WiCAM.Pn4000.ToolCalculationGuiWpf" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" xmlns:gridView="clr-namespace:WiCAM.Pn4000.WpfControls.GridView;assembly=WiCAM.Pn4000.WpfControls" xmlns:controls="clr-namespace:WiCAM.Pn4000.WpfBasics.Controls;assembly=WiCAM.Pn4000.WpfBasics" xmlns:dragDrop="clr-namespace:WiCAM.Pn4000.WpfControls.DragDrop;assembly=WiCAM.Pn4000.WpfControls" x:Name="ThisControl">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <Style x:Key="PartRowStyle" TargetType="{x:Type telerik:GridViewRow}">
        <Style.Resources>
          <ResourceDictionary>
            <Style x:Key="{x:Type TextBlock}" TargetType="{x:Type TextBlock}">
              <Setter Property="Foreground" Value="#FF000000" />
            </Style>
          </ResourceDictionary>
        </Style.Resources>
        <Setter xmlns:controls1="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Data" Property="controls1:RadRowItem.IsSelected" Value="{Binding IsSelectedByBinding, Mode=TwoWay}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="{Binding BorderCol}" />
        <Setter Property="Background" Value="{Binding BackgroundCol}" />
        <Setter Property="telerik:GridViewRow.SelectedBackground" Value="{Binding BackgroundCol}" />
        <Setter Property="telerik:GridViewRow.MouseOverBackground" Value="{Binding BackgroundCol}" />
        <Setter Property="Foreground" Value="#FF000000" />
        <Setter xmlns:dragdrop="clr-namespace:Telerik.Windows.DragDrop;assembly=Telerik.Windows.Controls" Property="dragdrop:DragDropManager.AllowDrag" Value="True" />
                <Setter xmlns:dragdrop="clr-namespace:Telerik.Windows.DragDrop;assembly=Telerik.Windows.Controls" Property="dragdrop:DragDropManager.TouchDragTrigger" Value="TapAndHold" />
        <EventSetter Event="MouseEnter" Handler="EventSetter_MouseEnter" />
        <EventSetter Event="MouseLeave" Handler="EventSetter_MouseLeave" />
        <EventSetter Event="MouseDoubleClick" Handler="EventSetter_MouseDoubleClick" />
      </Style>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Grid>
    <gridView:PnGridViewContainer StorageId="{Binding ElementName=ThisControl, Path=StorageId}">
      <gridView:PnGridViewContainer.GridView>
        <telerik:RadGridView Name="GridViewSequence" SelectionMode="Extended" GroupRenderMode="Flat" AllowDrop="True" AutoGenerateColumns="False" EnableLostFocusSelectedState="False" EnableRowVirtualization="False" EditTriggers="CurrentCellClick" ShowGroupPanel="False" IsFilteringAllowed="False" CanUserSortColumns="False" CanUserDeleteRows="False" CanUserSearch="False" EnableColumnVirtualization="False" ItemsSource="{Binding Bends}" ContextMenuOpening="GridViewSequence_OnContextMenuOpening" PreparedCellForEdit="GridViewSequence_OnPreparedCellForEdit">
          <FrameworkElement.Resources>
            <ResourceDictionary>
              <Style x:Key="{x:Type telerik:GridViewRow}" BasedOn="{StaticResource PartRowStyle}" TargetType="{x:Type telerik:GridViewRow}" />
              <DataTemplate x:Key="DraggedItemTemplate">
                <StackPanel>
                  <StackPanel Orientation="Horizontal">
                    <TextBlock>
                      <Run Text="{DynamicResource Telerik.DragDrop.Dragging}" /> <Run FontWeight="Bold" Text="{Binding CurrentDraggedItem.DragDesc, Mode=OneWay}" /></TextBlock>
                  </StackPanel>
                  <StackPanel Orientation="Horizontal">
                    <TextBlock FontWeight="Bold" MinWidth="45" Text="{Binding DropPositionTranslated}" />
                    <TextBlock>
                      <Run Text=", (" Foreground="#FFD3D3D3" /> <Run Text="{Binding CurrentDraggedOverItem.DragDesc, Mode=OneWay}" /> <Run Text=")" Foreground="#FFD3D3D3" /></TextBlock>
                  </StackPanel>
                </StackPanel>
              </DataTemplate>
              <Style x:Key="{x:Type telerik:RadComboBox}" TargetType="{x:Type telerik:RadComboBox}">
                <Setter Property="telerik:RadComboBox.OpenDropDownOnFocus" Value="True" />
              </Style>
            </ResourceDictionary>
          </FrameworkElement.Resources>
          <telerik:GridViewDataControl.Columns>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Order}" DataMemberBinding="{Binding OrderUi}">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <Button Margin="-5" Content="{Binding OrderUi}" Command="{Binding CmdSimGotoBend}" />
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Acb}" IsReadOnly="True">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <Label Margin="-5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MaxHeight="200" ToolTip="{Binding AcbToolTip}" Content="{Binding AcbIcon, Mode=OneWay}" />
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
            <telerik:GridViewCheckBoxColumn Header="{DynamicResource l_popup.BendView.Sequence.Lcb}" EditTriggers="CellClick,Default" AutoSelectOnEdit="True" DataMemberBinding="{Binding Lcb, UpdateSourceTrigger=PropertyChanged}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.BendAid}" IsReadOnly="True">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <Label Margin="-5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MaxHeight="200" ToolTip="{Binding LiftingAidToolTip}" Content="{Binding LiftingAidIcon, Mode=OneWay}" />
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Finger}">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <controls1:RadButton FrameworkElement.Margin="-5" Control.HorizontalContentAlignment="Stretch" Control.VerticalContentAlignment="Stretch" FrameworkElement.MaxHeight="20" xmlns:controls1="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls" FrameworkElement.ToolTip="{Binding FingerStabilityTooltip}" Control.Background="{Binding FingerStabilityColor}" ButtonBase.Command="{Binding CmdCalcFinger}">
                    <ContentControl.Content>
                      <TextBlock Margin="1,0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="F" Background="{Binding FingerStabilityColor}" />
                    </ContentControl.Content>
                  </controls1:RadButton>
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.HasTools}" DataMemberBinding="{Binding HasTools}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Angle}" DataMemberBinding="{Binding AngleChange}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.LengthWithGaps}" DataMemberBinding="{Binding LengthTotalWithGaps}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.LengthWithoutGaps}" DataMemberBinding="{Binding LengthTotalWithoutGaps}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Collisions}" DataMemberBinding="{Binding Collision}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.SimCheck}" />
            <telerik:GridViewComboBoxColumn Header="{DynamicResource l_popup.BendView.Sequence.Setup}" SelectedValueMemberPath="Value" DisplayMemberPath="Desc" EditTriggers="CellClick" DataMemberBinding="{Binding ToolSetupNo}" ItemsSource="{Binding ToolSetups}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.SectionGroup}" DataMemberBinding="{Binding AnchorClusterNo}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Punch}" DataMemberBinding="{Binding UpperToolProfile}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Die}" DataMemberBinding="{Binding LowerToolProfile}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Comment}" DataMemberBinding="{Binding Comment}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Flip}" EditTriggers="CellClick" DataMemberBinding="{Binding FlipGeometry}">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <CheckBox IsChecked="{Binding FlipGeometry}" />
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Radius}" DataMemberBinding="{Binding RadiusUiUnits}" />
            <telerik:GridViewComboBoxColumn Header="{DynamicResource l_popup.BendView.Sequence.StepChangeMode}" SelectedValueMemberPath="Value" DisplayMemberPath="Desc" ToolTip="Test" EditTriggers="CellClick" DataMemberBinding="{Binding UserStepChangeMode}" ItemsSource="{Binding StepChangeModes}">
              <FrameworkContentElement.Resources>
                <ResourceDictionary>
                  <Style x:Key="{x:Type telerik:RadComboBoxItem}" TargetType="{x:Type telerik:RadComboBoxItem}">
                    <Setter Property="FrameworkElement.ToolTip" Value="{Binding Tooltip}" />
                  </Style>
                </ResourceDictionary>
              </FrameworkContentElement.Resources>
            </telerik:GridViewComboBoxColumn>
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.ReleasePoint}" DataMemberBinding="{Binding UserReleasePointUiUnits}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.ReleasePointNcOut}" DataMemberBinding="{Binding ReleasePointUiUnits}" />
            <telerik:GridViewDataColumn Header="{DynamicResource l_popup.BendView.Sequence.Included}" EditTriggers="CellClick" DataMemberBinding="{Binding IsIncluded}">
              <telerik:GridViewColumn.CellTemplate>
                <DataTemplate>
                  <CheckBox IsChecked="{Binding IsIncluded}" />
                </DataTemplate>
              </telerik:GridViewColumn.CellTemplate>
            </telerik:GridViewDataColumn>
          </telerik:GridViewDataControl.Columns>
        </telerik:RadGridView>
      </gridView:PnGridViewContainer.GridView>
    </gridView:PnGridViewContainer>
  </Grid>
</UserControl>