<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="WiCAM.Pn4000.GuiWpf.Ui3D.MachineConfig.SubBendTable.BendTableView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:WiCAM.Pn4000.GuiWpf.Ui3D.MachineConfig.SubBendTable"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" 
             xmlns:gridView="clr-namespace:WiCAM.Pn4000.WpfControls.GridView;assembly=WiCAM.Pn4000.WpfControls" 
             DataContextChanged="BendTableView_OnDataContextChanged">
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="2*" />
      <ColumnDefinition Width="5" />
      <ColumnDefinition Width="1*" />
    </Grid.ColumnDefinitions>
    <GridSplitter Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" />
    <Grid Column="0">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="1*" />
      </Grid.RowDefinitions>
      <WrapPanel Grid.Row="0" Margin="5">
        <TextBlock Text="{DynamicResource l_popup.PopupBendZoneData.FixedValue}" ToolTip="{DynamicResource l_popup.PopupBendZoneData.FixedValueTt}" VerticalAlignment="Center" />
        <telerik:RadComboBox DisplayMemberPath="Desc" SelectedValuePath="Value" ItemsSource="{Binding FixedValueTypes}" SelectedValue="{Binding FixedValueType}" />
        <TextBlock Text="{DynamicResource l_popup.BendTable.DefaultKFactor}" ToolTip="{DynamicResource l_popup.BendTable.DefaultKFactorTt}" VerticalAlignment="Center" />
        <TextBox MinWidth="50" Text="{Binding DefaultKFactor}" />
        <TextBox MinWidth="100" ToolTip="{DynamicResource l_popup.BendTable.BendTableNameTt}" VerticalAlignment="Center" Text="{Binding BendTableName}" />
        <telerik:RadComboBox DisplayMemberPath="Desc" SelectedValuePath="Value" ItemsSource="{Binding AllBendTables}" SelectedValue="{Binding BendTable}" />
      </WrapPanel>
      <gridView:PnGridViewContainer Name="elementViewContainer" Grid.Row="1" BorderThickness="1" BorderBrush="#FFA9A9A9" Background="#FFF5F5F5" Margin="5">
        <gridView:PnGridViewContainer.GridView>
          <telerik:RadGridView HorizontalContentAlignment="Left" ValidatesOnDataErrors="InEditMode" ValidationType="Default" SelectionMode="Extended" AutoGenerateColumns="False" SelectionUnit="Mixed" RightFrozenColumnsSplitterVisibility="Visible" EnableColumnVirtualization="True" EnableRowVirtualization="True"  IsSynchronizedWithCurrentItem="True" ShowColumnFooters="True" GroupRenderMode="Flat" CanUserInsertRows="True" NewRowPosition="None" IsBusy="{Binding ItemsLoading}" ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem, UpdateSourceTrigger=PropertyChanged}" Deleting="GridViewDataControl_OnDeleting" SelectionChanged="DataControl_OnSelectionChanged">
            <telerik:GridViewDataControl.Columns>
              <telerik:GridViewComboBoxColumn SelectedValueMemberPath="Value" DisplayMemberPath="Desc" Header="{DynamicResource l_popup.PopupBendZoneData.MaterialGroup}" Width="AUTO" ItemsSource="{Binding Materials}" DataMemberBinding="{Binding Material3DGroupID}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:CountFunction Caption="Count:  " ResultFormatString="{}{0:#,0}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewComboBoxColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.Thickness}" Width="AUTO" DataMemberBinding="{Binding Thickness, TargetNullValue=*}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.Angle}" Width="AUTO" DataMemberBinding="{Binding Angle, TargetNullValue=*}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.Radius}" Width="AUTO" DataMemberBinding="{Binding Radius, TargetNullValue=*}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn DataFormatString="F2" Header="{DynamicResource l_popup.PopupBendZoneData.KFactorShort}" Width="AUTO" DataMemberBinding="{Binding KFactor, TargetNullValue=-}">
                <telerik:GridViewColumn.HeaderCellStyle>
                  <Style TargetType="{x:Type telerik:GridViewHeaderCell}">
                    <Setter Property="ToolTipService.ToolTip" Value="{Binding DataContext.KfImage, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                  </Style>
                </telerik:GridViewColumn.HeaderCellStyle>
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.#####}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.#####}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn DataFormatString="F2" Header="{DynamicResource l_popup.PopupBendZoneData.BAShort}" Width="AUTO" DataMemberBinding="{Binding BendAllowance, TargetNullValue=-}">
                <telerik:GridViewColumn.HeaderCellStyle>
                  <Style TargetType="{x:Type telerik:GridViewHeaderCell}">
                    <Setter Property="ToolTipService.ToolTip" Value="{Binding DataContext.BaImage, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                  </Style>
                </telerik:GridViewColumn.HeaderCellStyle>
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.#####}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.#####}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn DataFormatString="F2" Header="{DynamicResource l_popup.PopupBendZoneData.BDShort}" Width="AUTO" DataMemberBinding="{Binding BendDeduction, TargetNullValue=-}">
                <telerik:GridViewColumn.HeaderCellStyle>
                  <Style TargetType="{x:Type telerik:GridViewHeaderCell}">
                    <Setter Property="ToolTipService.ToolTip" Value="{Binding DataContext.BdImage, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                  </Style>
                </telerik:GridViewColumn.HeaderCellStyle>
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.#####}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.#####}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn DataFormatString="F2" Header="{DynamicResource l_popup.PopupBendZoneData.DinShort}" Width="AUTO" DataMemberBinding="{Binding Din, TargetNullValue=-}">
                <telerik:GridViewColumn.HeaderCellStyle>
                  <Style TargetType="{x:Type telerik:GridViewHeaderCell}">
                    <Setter Property="ToolTipService.ToolTip" Value="{Binding DataContext.DinImage, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                  </Style>
                </telerik:GridViewColumn.HeaderCellStyle>
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.#####}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.#####}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.VWidth}" Width="AUTO" DataMemberBinding="{Binding VWidth, TargetNullValue=-}" IsVisible="{Binding MachineIsSelected}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.CornerRadius}" Width="AUTO" DataMemberBinding="{Binding CornerRadius, TargetNullValue=-}" IsVisible="{Binding MachineIsSelected}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewComboBoxColumn Header="{DynamicResource l_popup.PopupBendZoneData.CornerType}" Width="AUTO" DisplayMemberPath="Desc" SelectedValueMemberPath="Value" DataMemberBinding="{Binding CornerType, TargetNullValue=-}" IsVisible="{Binding MachineIsSelected}" ItemsSource="{Binding CornerTypes}" />
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.PunchRadius}" Width="AUTO" DataMemberBinding="{Binding PunchRadius, TargetNullValue=-}" IsVisible="{Binding MachineIsSelected}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
              <telerik:GridViewDataColumn Header="{DynamicResource l_popup.PopupBendZoneData.SpringBack}" Width="AUTO" DataMemberBinding="{Binding SpringBack, TargetNullValue=-}" IsVisible="{Binding MachineIsSelected}">
                <telerik:GridViewColumn.AggregateFunctions>
                  <telerik:MinFunction Caption="Min:  " ResultFormatString="{}{0:#,0.###}" />
                  <telerik:MaxFunction Caption="Max:  " ResultFormatString="{}{0:#,0.###}" />
                </telerik:GridViewColumn.AggregateFunctions>
              </telerik:GridViewDataColumn>
            </telerik:GridViewDataControl.Columns>
          </telerik:RadGridView>
        </gridView:PnGridViewContainer.GridView>
      </gridView:PnGridViewContainer>
    </Grid>
    <Grid Column="2">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="1*" />
      </Grid.RowDefinitions>
      <WrapPanel Grid.Row="0">
        <TextBlock VerticalAlignment="Center" TextWrapping="Wrap" MinWidth="100" Text="{Binding PlotTitle}" />
                <telerik:RadToggleSwitchButton  telerik:RadToggleSwitchButton.CheckedContent="2D" telerik:RadToggleSwitchButton.UncheckedContent="3D" UIElement.Visibility="Collapsed" ToggleButton.IsChecked="{Binding UsePlot2D}" />
                <telerik:RadToggleSwitchButton telerik:RadToggleSwitchButton.CheckedContent="{DynamicResource l_popup.PopupBendZoneData.Isometric}" telerik:RadToggleSwitchButton.UncheckedContent="{DynamicResource l_popup.PopupBendZoneData.Perspective}" ToggleButton.IsChecked="{Binding UseCameraOrthographic}" UIElement.Visibility="{Binding PlotVisibility3D}"/>
      </WrapPanel>
      <telerik:RadCartesianChart3D Grid.Row="1" Visibility="{Binding PlotVisibility3D}" Camera="{Binding Camera3d}">
        <telerik:RadCartesianChart3D.XAxis>
          <telerik:LinearAxis3D Title="{DynamicResource l_popup.PopupBendZoneData.Angle}" />
        </telerik:RadCartesianChart3D.XAxis>
        <telerik:RadCartesianChart3D.YAxis>
          <telerik:LinearAxis3D Title="{DynamicResource l_popup.PopupBendZoneData.Radius}" />
        </telerik:RadCartesianChart3D.YAxis>
        <telerik:RadCartesianChart3D.ZAxis>
          <telerik:LinearAxis3D Title="{Binding CurrentFixedValueTypeDesc}" />
        </telerik:RadCartesianChart3D.ZAxis>
        <telerik:RadCartesianChart3D.Grid>
          <telerik:CartesianChart3DGrid />
        </telerik:RadCartesianChart3D.Grid>
        <telerik:RadCartesianChart3D.Behaviors>
          <telerik:Chart3DCameraBehavior Distance="3000" FirstAngle="232" SecondAngle="73" />
          <telerik:Chart3DTooltipBehavior />
        </telerik:RadCartesianChart3D.Behaviors>
        <telerik:RadCartesianChart3D.TooltipTemplate>
          <DataTemplate>
            <Border Background="#D9FFFFFF" Padding="8" CornerRadius="2">
              <StackPanel>
                <StackPanel Orientation="Horizontal">
                  <TextBlock>
                    <Run Text="{DynamicResource l_popup.PopupBendZoneData.Angle}" FontWeight="Bold" /> <Run Text=": " FontWeight="Bold" /> <Run Text="{Binding XValue, Mode=OneWay, StringFormat=0.###}" /> <Run Text="{Binding DataItem.AngleUnit, Mode=OneWay}" /></TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                  <TextBlock>
                    <Run Text="{DynamicResource l_popup.PopupBendZoneData.Radius}" FontWeight="Bold" /> <Run Text=": " FontWeight="Bold" /> <Run Text="{Binding YValue, Mode=OneWay, StringFormat=0.###}" /> <Run Text="{Binding DataItem.LengthUnit, Mode=OneWay}" /></TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                  <TextBlock>
                    <Run FontWeight="Bold" Text="{Binding DataItem.CurrentFixedValueDesc, Mode=OneWay}" /> <Run Text=": " FontWeight="Bold" /> <Run Text="{Binding ZValue, Mode=OneWay, StringFormat=0.###}" /></TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                  <TextBlock>
                    <Run Text="{DynamicResource l_popup.PopupBendZoneData.Thickness}" FontWeight="Bold" /> <Run Text=": " FontWeight="Bold" /> <Run Text="{Binding DataItem.Thickness, Mode=OneWay, StringFormat=0.###}" /> <Run Text="{Binding DataItem.LengthUnit, Mode=OneWay}" /></TextBlock>
                </StackPanel>
              </StackPanel>
            </Border>
          </DataTemplate>
        </telerik:RadCartesianChart3D.TooltipTemplate>
        <telerik:RadCartesianChart3D.Series>
          <telerik:PointSeries3D XValueBinding="PlotAngle" YValueBinding="PlotRadius" ZValueBinding="PlotCurrentFixedValue" ItemsSource="{Binding PlotValues3D}">
            <telerik:XyzSeries3D.DefaultVisualMaterialSelector>
              <local:MaterialGenericEntrySelector />
            </telerik:XyzSeries3D.DefaultVisualMaterialSelector>
          </telerik:PointSeries3D>
        </telerik:RadCartesianChart3D.Series>
      </telerik:RadCartesianChart3D>
      <telerik:RadCartesianChart Grid.Row="1" Visibility="{Binding PlotVisibility2D}">
        <telerik:RadCartesianChart.HorizontalAxis>
          <telerik:LinearAxis Title="{DynamicResource l_popup.PopupBendZoneData.Radius}" />
        </telerik:RadCartesianChart.HorizontalAxis>
        <telerik:RadCartesianChart.VerticalAxis>
          <telerik:LinearAxis Title="{Binding CurrentFixedValueTypeDesc}" />
        </telerik:RadCartesianChart.VerticalAxis>
        <telerik:RadChartBase.TooltipTemplate>
          <DataTemplate>
            <Border Background="#D9FFFFFF" Padding="8" CornerRadius="2">
              <StackPanel>
                <TextBlock>Test Tooltip</TextBlock>
              </StackPanel>
            </Border>
          </DataTemplate>
        </telerik:RadChartBase.TooltipTemplate>
        <telerik:RadChartBase.SeriesProvider>
          <telerik:ChartSeriesProvider Source="{Binding PlotValues2D}">
            <telerik:ChartSeriesProvider.SeriesDescriptors>
              <telerik:ScatterSeriesDescriptor ItemsSourcePath="Data" XValuePath="R" YValuePath="KFactor" />
            </telerik:ChartSeriesProvider.SeriesDescriptors>
          </telerik:ChartSeriesProvider>
        </telerik:RadChartBase.SeriesProvider>
      </telerik:RadCartesianChart>
    </Grid>
  </Grid>
</UserControl>